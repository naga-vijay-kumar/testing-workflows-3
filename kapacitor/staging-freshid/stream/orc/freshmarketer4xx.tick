//Alert when container memory happen
stream
    |from()
        .database('staging-freshid')
        .measurement('nginx_response_4xx')
    |where(lambda: "path" == '/v2/signup/freshmarketer')
    |window()
        .period(60m)
        .every(60m)
    |count('value')
        .as('4xx_count')
    |alert()
        .message('[ {{ .Time }} [ freshmarketer_4xx ] - {{ index .Fields "freshmarketer_4xx" }} {{ .Level }}')
        .crit(lambda: "4xx_count" >= 10 )
        .critReset(lambda: "4xx_count" < 0)
        .stateChangesOnly()
        .topic('staging-freshid')
